# Dynamic Routing Overview

## Connected Routes vs Local Routes

After configuring IPs in a network, if we check the routing table on a router, there will be two types of routes: **Connected Routes** and **Local Routes**.

- **Connected Routes**: Used for the whole network (network route). The subnet mask length will be smaller than `/32`.
- **Local Routes**: Used for a specific host, a route to a single host (`/32`).

---

## Dynamic vs Static Routing

- In **dynamic routing**, if a failure occurs in the network (for example, if a router interface goes down), the router automatically adapts by removing invalid routes from the routing table.
- If there are multiple paths to a network and one fails, it will automatically use the second path.
- In **static routing**, the router does not know about failures. If it cannot reach the destination, it will still try to send traffic through the failed path.

---

## How Dynamic Routing Works

- Routers use dynamic routing protocols to advertise information about the routes they know to other routers.
- They form **adjacencies/neighbor relationships** with directly connected routers to exchange this information.
- If multiple routes to a destination are learned, the router determines the superior route using **metrics** (lower metric = better).
- Dynamic routing protocols are divided into two main categories:
  - **IGP (Interior Gateway Protocol)**: Used within a single Autonomous System (AS).
  - **EGP (Exterior Gateway Protocol)**: Used between different Autonomous Systems.

---

## Dynamic Routing Protocol Categories

| Category | Algorithm | Protocols |
| --- | --- | --- |
| IGP | Distance Vector | RIP, EIGRP |
| IGP | Link State | OSPF, IS-IS |
| EGP | Path Vector | BGP |

---

## Distance Vector Routing Protocols

- Invented before Link State protocols.
- Early examples: RIP v1 and Cisco proprietary IGRP (later updated to EIGRP).
- Operate by sending **known destination networks** and their **metrics** to directly connected neighbors.
- Known as **"routing by rumor"** because the router only knows what its neighbors tell it.
- Called **distance vector** because routers only learn the **distance** (metric) and **vector** (direction/next-hop router) to each route.

---

## Link State Routing Protocols

- Each router creates a **connectivity map** of the network.
- Routers advertise information about their connected networks to neighbors, which is then propagated until all routers have the same map.
- Each router independently calculates the best route.
- Uses more CPU and memory but reacts faster to changes than Distance Vector protocols.

---

## Dynamic Routing Protocol Metrics

| IGP Protocol | Metric | Explanation |
| --- | --- | --- |
| RIP | Hop count | Each router counts as one hop. Total metric = total hops to destination. All links are considered equal. |
| EIGRP | Bandwidth & delay (by default) | Uses the bandwidth of the slowest link and total delay of all links. |
| OSPF | Cost | Calculated based on bandwidth. Total metric = sum of link costs. |
| IS-IS | Cost | Sum of link costs. Default cost for all links is 10 unless manually set. |

---

## Administrative Distance (AD)

- Metric is used to compare routes learned via the same routing protocol.
- AD is used to compare routes learned via different routing protocols.
- Lower AD = more trusted.

| Route Protocol/Type | AD |
| --- | --- |
| Directly connected | 0 |
| Static | 1 |
| External BGP (eBGP) | 20 |
| EIGRP | 90 |
| IGRP | 100 |
| OSPF | 110 |
| IS-IS | 115 |
| RIP | 120 |
| EIGRP (external) | 170 |
| Internal BGP (iBGP) | 200 |
| Unusable route | 255 |

> If AD = 255, the route is not installed in the routing table.

---

## Floating Static Routes

- By changing the AD of a static route, you can make it less preferred than routes learned by a dynamic protocol (set AD higher than the dynamic protocolâ€™s AD).
- This is called a **floating static route**.
- It becomes active only if the dynamic route is removed (e.g., neighbor adjacency lost, interface failure).

