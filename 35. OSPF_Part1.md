
# OSPF (Open Shortest Path First) - Simple Explanation

## Link State Routing Protocols
When using a link state routing protocol, each router creates a **map of the network**.
To make this happen:
1. Each router advertises details about its connected networks (interfaces) to neighbors.
2. Neighbors share this info further until **all routers know the same network map**.
3. Each router then works out the best path to each destination.

**Note:** Link state protocols use more CPU and memory, but they respond faster to changes compared to distance vector protocols.

---

## OSPF Basics
- **OSPF** = Open Shortest Path First.
- Uses **Shortest Path First (SPF)** algorithm created by Edsger Dijkstra.
- Versions:
  - **OSPFv1 (1989):** Old, unused.
  - **OSPFv2 (1998):** For IPv4 (most common).
  - **OSPFv3 (2008):** For IPv6 (can also work for IPv4).

Routers store network information in **LSAs (Link State Advertisements)**, which are kept in the **LSDB (Link State Database)**.
Routers keep flooding LSAs until all in the area have the same LSDB.

**LSA Example:** Each LSA has a 30-min timer. When the timer expires, it’s sent again.

---

## OSPF Steps
1. Become neighbors with routers on the same network segment.
2. Exchange LSAs with neighbors.
3. Calculate the best routes and add them to the routing table.

---

## OSPF Areas
- Areas help keep OSPF fast and efficient.
- **Small network:** 1 area is fine.
- **Large network:** Multiple areas recommended to avoid:
  - Slow SPF calculations.
  - High CPU usage.
  - Large LSDB memory use.
  - Lots of LSA flooding when small changes happen.

**Area terms:**
- **Backbone area (area 0):** All other areas must connect to it.
- **Internal Router:** All interfaces in the same area.
- **ABR (Area Border Router):** Interfaces in multiple areas.
- **Backbone Router:** Connected to area 0.

**Routes:**
- **Intra-area:** Inside the same area.
- **Interarea:** Between areas.

**ABR tip:** Connect to max 2 areas for best performance.

**Rules:**
- Areas should be continuous.
- Each area must have at least one ABR to area 0.
- Interfaces in the same subnet = same OSPF area.

---

## OSPF Configuration Example (R1)
```bash
R1(config)#router ospf 1
R1(config-router)#network 10.0.12.0 0.0.0.3 area 0
R1(config-router)#network 10.0.13.0 0.0.0.3 area 0
R1(config-router)#network 172.16.1.0 0.0.0.15 area 0
```

**Notes:**
- Process ID (1 above) is **local only** — doesn’t need to match between routers.
- `network` command:
  1. Finds interfaces in that IP range.
  2. Activates OSPF on them in that area.
  3. Tries to form OSPF neighbor relationships.

---

## Passive Interface
```bash
R1(config-router)#passive-interface g2/0
```
- Stops sending hello messages on that interface.
- Still advertises the network to neighbors.
- Use on interfaces without OSPF neighbors.

---

## Default Route Advertisement (ASBR)
```bash
R1(config-router)#default-information originate
```
- Makes the router share its default route with OSPF neighbors.
- Router becomes an **ASBR** (connects OSPF to external networks).

---

## Router ID
Order of selection:
1. Manual configuration.
2. Highest IP on a loopback interface.
3. Highest IP on a physical interface.

Example:
```bash
R1(config-router)#router-id 1.1.1.1
R1#clear ip ospf process
```

---

## Extra Commands
- `maximum-paths 8` → Equal load balancing over 8 paths.
- `distance 85` → Set OSPF administrative distance.

---


