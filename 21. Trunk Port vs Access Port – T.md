## üéØ Trunk Port vs Access Port ‚Äì Tagging, 802.1Q, and Ethernet Frame Details

---

### üì¶ Trunk Port = Tagged Port
- A **trunk port** is used to **carry traffic for multiple VLANs** between switches or between a switch and a router.
- It uses **802.1Q encapsulation** (also called **dot1q**) to **tag each Ethernet frame** with a VLAN ID.
- This VLAN tag ensures the receiving device knows **which VLAN the frame belongs to**.

üß™ For example:  
A trunk port can send frames for VLAN 10, 20, and 30 over **one cable** using tags like:

Frame 1 ‚Üí VLAN 10
Frame 2 ‚Üí VLAN 20
Frame 3 ‚Üí VLAN 30


Each frame includes a special **802.1Q tag** that identifies its VLAN.

---

### üì¶ Access Port = Untagged Port
- An **access port** is assigned to **only one VLAN**.
- It **does not tag** the frames ‚Äî traffic entering or leaving an access port is **untagged**.
- Access ports are used to connect **end devices** like PCs, printers, IP phones, etc.

üß™ Example:  
A PC connected to Fa0/1 (access port in VLAN 10) will send and receive **normal Ethernet frames**, with **no VLAN tag** attached.

---

### üß¨ 802.1Q (Dot1Q) VLAN Tagging Explained

**802.1Q** is the industry standard protocol used for VLAN tagging on Ethernet networks.

When a frame is sent out of a **trunk port**, a **4-byte VLAN tag** is inserted **inside the Ethernet frame header**.

---

### üìê Ethernet Frame Structure with 802.1Q Tag

| Field               | Size   | Description |
|---------------------|--------|-------------|
| **Preamble**        | 7 Bytes | Synchronization bits |
| **SFD** (Start Frame Delimiter) | 1 Byte  | Indicates start of frame |
| **Destination MAC** | 6 Bytes | Destination MAC address |
| **Source MAC**      | 6 Bytes | Source MAC address |
| **802.1Q Tag**      | 4 Bytes | VLAN info (explained below) |
| **Type/Length**     | 2 Bytes | Type (e.g., IPv4 = 0x0800) |
| **Data**            | 46‚Äì1500 Bytes | Payload (e.g., IP packet) |
| **FCS**             | 4 Bytes | Frame Check Sequence (error checking) |

---

### üîç Inside the 802.1Q VLAN Tag (4 Bytes Total)

| Field | Size | Description |
|-------|------|-------------|
| **TPID** (Tag Protocol ID) | 2 Bytes | Always `0x8100` to identify dot1q |
| **TCI** (Tag Control Info) | 2 Bytes | Includes: |
| - Priority (3 bits) | - | QoS priority (0‚Äì7) |
| - CFI (1 bit)       | - | Canonical Format Indicator |
| - VLAN ID (12 bits) | - | Range: 1 to 4094 |

üìå The most important part here is the **VLAN ID**, which tells the switch which VLAN the frame belongs to.

---

### üßæ Summary

| Feature            | Access Port                  | Trunk Port                    |
|--------------------|------------------------------|-------------------------------|
| VLAN Membership     | One VLAN only                | Multiple VLANs                |
| Tagging             | **Untagged**                 | **Tagged using 802.1Q**       |
| Frame Type          | Standard Ethernet            | Ethernet + 802.1Q tag         |
| Use Case            | End devices (PCs, Printers)  | Switch-to-switch, Switch-Router |
| 802.1Q Encapsulation | ‚ùå Not used                  | ‚úÖ Used (dot1q)                |

---

‚úÖ **Remember:**  
- **Access Port = Untagged**  
- **Trunk Port = Tagged (802.1Q / dot1q)**  
- **802.1Q adds a 4-byte VLAN tag** between Source MAC and Type/Length in the Ethernet frame.

