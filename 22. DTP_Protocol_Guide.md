
# üåê Dynamic Trunking Protocol (DTP) - Cisco Switching Concepts

## üìò Introduction

dtp is a cisco proprietary protocol that allows cisco switchs to dynamically determine theire interfaces status to access or trunk without menual configration.  
DTp is enabled by defualt on all cisco switches interfaces.  
it is proprietry protocol thats why it is only enabled by default on cisco switchs.

---

## ‚öôÔ∏è Commands

```
switchport mode acces OR switchport mode trunk
```

---

## üîê Security

For security perposes, manual configration is recomended.  
dtp should be desabled on all switches because dtp can exploid by attakers.

---

## üõ†Ô∏è Commands for DTP

```
switchport mode dynamic auto
switchport mode dynamic desirable
```

---

## ü§ù Dynamic Desirable Mode

a switch port in dynamic desirable mode will activly try to form a trunk with other cisco switches.  
it will form a trunk if connected to another switchport in the following modes:

```
switchport mode trunk
switchport mode desirable
switchport mode auto
```

---

## üîç View Interface Mode

for looking in what mode the interface is we use commond:

```
interface g0/0 switchport
```

---

## ü§ù Dynamic Auto Mode

a switchport in dynamic auto mode will not actively try to form a trunk witch other cisco switches,  
however it will form a trunk if the switch connected to it is actively trying to form a trunk.  
it will form a trunk with a switch port in the following modes:

```
switchport mode trunk 
switchport mode dynamic desirable
```

---

## üö´ Non-Switch Devices

DTP will not form a trunk with a router or pc etc.  
the switcport will be in access mode.  
if we want to configure router on a stic we will manualy configure switchport trunk to the port connected to router.

---

## üßì Default Modes

on older switches, `switchport mode dynamic desirable` is the defualt admanistrative mode.  
on newer switches, `switchport mode dynamic auto` is the defualt admanistrative mode.

---

## ‚ùå Disable DTP Negotiation

we can disable DTP negotiation on an interface with this commond:

```
switchport nonegotiation
```

if we use this commond, switch port will not send dtp negotiation framse on that port.

configuring an access port with the `switchport mode access` also disable dtp negotiation on an interface.

---

## ‚úÖ Recommendation

it is recomended that you disable dtp on all switchports and manually configure them as acces or trunk port.

---

## üîÑ Encapsulation Negotiation

switches that support both 802.1Q and ISL trunk encapsulations can use dtp to negotiate the encapsulation they will use.

this negotiation is enabled by default, as the the default trunk encapsulation mode is:

```
switchport trunk encapsulation negotiate
```

ISL is favored over 802.1Q, so if both switches support isl it will be selected.

---

## üì° DTP Frame Transmission

DTP frame are sent in Vlan1 when using ISL,  
or in the native vlan when using 802.1Q (the defualt native Vlan is Vlan1 ,however).
